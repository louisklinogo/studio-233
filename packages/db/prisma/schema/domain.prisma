// Domain models for Studio+233

model Project {
  id          String   @id @default(cuid())
  name        String
  description String?
  thumbnail   String?
  userId      String
  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  // Relations
  canvases    Canvas[]
  assets      Asset[]

  @@index([userId])
  @@map("project")
}

model Canvas {
  id          String   @id @default(cuid())
  name        String
  width       Int      @default(1920)
  height      Int      @default(1080)
  data        String   @db.Text // JSON data for canvas state
  projectId   String
  project     Project  @relation(fields: [projectId], references: [id], onDelete: Cascade)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@index([projectId])
  @@map("canvas")
}

model Asset {
  id          String   @id @default(cuid())
  name        String
  type        String   // image, video, etc.
  url         String
  size        Int      // in bytes
  mimeType    String
  projectId   String
  project     Project  @relation(fields: [projectId], references: [id], onDelete: Cascade)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@index([projectId])
  @@map("asset")
}

model BatchJob {
  id          String   @id @default(cuid())
  userId      String
  status      String   // pending, processing, completed, failed
  config      String   @db.Text // JSON config
  inputFiles  String   @db.Text // JSON array of file URLs
  outputFiles String?  @db.Text // JSON array of result URLs
  error       String?  @db.Text
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  completedAt DateTime?

  @@index([userId])
  @@index([status])
  @@map("batch_job")
}
